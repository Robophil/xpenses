<StackLayout class="page">
  <ActionBar [title]="title" class="action-bar">
    <NavigationButton icon="res://ic_arrow_back_white_24dp" (tap)="goBack($event)"></NavigationButton>

    <ActionItem icon="res://ic_add_white" (tap)="addExpense()"></ActionItem>
    <ActionItem icon="res://ic_done_white_24dp" (tap)="doneCycle()"></ActionItem>
  </ActionBar>

  <GridLayout rows="auto, *" *ngIf="data$ | async as data">

    <StackLayout row="0" class="header">
      <GridLayout class="content" row="1">
        <Label class="e" [text]="this.cycle.expense"></Label>
      </GridLayout>

      <StackLayout row="0" class="top">
        <Label class="h5" [text]="this.cycle.budget"></Label>
      </StackLayout>

      <StackLayout row="2" class="bottom">
        <Label *ngIf="getIsExpenseOk(); else BadEl" class="h5 s" text="YOUR EXPENSES ARE IN GOOD SHAPE :)"></Label>
        <ng-template #BadEl>
          <Label class="h5 r" text="SPENT ABOVE YOUR BUDGET HERE :("></Label>
        </ng-template>
      </StackLayout>
    </StackLayout>

    <AbsoluteLayout row="3" class="content-body">
      <ListView [items]="data" (loaded)="onLoaded($event)" (itemLoading)="onItemLoading($event)" (itemTap)="onItemTap($event)" class="list-group">
        <ng-template let-item="item" let-odd="odd" let-even="even">
          <GridLayout class="list-group-item" columns="*, auto">
            <Label [text]="item.name" class="h5"></Label>
            <Label [text]="item.value" class="h5 cost"></Label>
          </GridLayout>
        </ng-template>
      </ListView>
    </AbsoluteLayout>

  </GridLayout>
</StackLayout>
