"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var store_1 = require("@ngrx/store");
var store_devtools_1 = require("@ngrx/store-devtools");
var ngrx_devtools_nativescript_1 = require("ngrx-devtools-nativescript");
var store_2 = require("@ngrx/store");
var core_1 = require("@ngrx/core");
var Cycles = require("./cycles");
var environment_1 = require("../environments/environment");
exports.reducers = {
    test: function () {
        return { a: 'hey' + Math.floor(Math.random() * 1000) };
    },
    cycles: Cycles.cycles,
};
;
var prod = store_2.combineReducers(exports.reducers);
var dev = core_1.compose(store_2.combineReducers)(exports.reducers);
function redux(state, action) {
    return environment_1.environment.production ? prod(state, action) : dev(state, action);
}
exports.redux = redux;
exports.STORE = [
    ngrx_devtools_nativescript_1.NativeScriptDevToolsMonitors,
    store_1.StoreModule.provideStore(redux),
    store_devtools_1.StoreDevtoolsModule.instrumentStore(),
];
// Selectors
function getCycles() {
    return function (state$) { return state$.select(function (s) { return s.cycles; }); };
}
exports.getCycles = getCycles;
function getCyclesIds() {
    return core_1.compose(Cycles.getIds(), getCycles());
}
exports.getCyclesIds = getCyclesIds;
function getCyclesSelectedId() {
    return core_1.compose(Cycles.getSelectedId(), getCycles());
}
exports.getCyclesSelectedId = getCyclesSelectedId;
function getCyclesSelectedDate() {
    return core_1.compose(Cycles.getSelectedDate(), getCycles());
}
exports.getCyclesSelectedDate = getCyclesSelectedDate;
function getCyclesDataRaw() {
    return function (state$) { return state$.select(function (s) { return s.cycles.data; }); };
}
exports.getCyclesDataRaw = getCyclesDataRaw;
function getCyclesData() {
    return function (state$) { return state$
        .let(getCyclesIds())
        .switchMap(function (ids) { return state$.let(core_1.compose(Cycles.getData(ids), getCycles())); }); };
}
exports.getCyclesData = getCyclesData;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHFDQUE4RDtBQUM5RCx1REFBMkQ7QUFFM0QseUVBQTBFO0FBRTFFLHFDQUE4QztBQUM5QyxtQ0FBcUM7QUFDckMsaUNBQW1DO0FBQ25DLDJEQUEwRDtBQUU3QyxRQUFBLFFBQVEsR0FBRztJQUN0QixJQUFJLEVBQUU7UUFDSixNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxHQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFDLElBQUksQ0FBQyxFQUFFLENBQUE7SUFDcEQsQ0FBQztJQUNELE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTTtDQUN0QixDQUFDO0FBS0QsQ0FBQztBQUVGLElBQU0sSUFBSSxHQUFHLHVCQUFlLENBQUMsZ0JBQVEsQ0FBQyxDQUFDO0FBQ3ZDLElBQU0sR0FBRyxHQUFHLGNBQU8sQ0FBQyx1QkFBZSxDQUFDLENBQUMsZ0JBQVEsQ0FBQyxDQUFDO0FBQy9DLGVBQXNCLEtBQVUsRUFBRSxNQUFXO0lBQzNDLE1BQU0sQ0FBQyx5QkFBVyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDM0UsQ0FBQztBQUZELHNCQUVDO0FBRVksUUFBQSxLQUFLLEdBQUc7SUFDbkIseURBQTRCO0lBQzVCLG1CQUFXLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztJQUMvQixvQ0FBbUIsQ0FBQyxlQUFlLEVBQUU7Q0FFdEMsQ0FBQztBQUVGLFlBQVk7QUFDWjtJQUNFLE1BQU0sQ0FBQyxVQUFDLE1BQW1CLElBQUssT0FBQSxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLE1BQU0sRUFBUixDQUFRLENBQUMsRUFBNUIsQ0FBNEIsQ0FBQztBQUMvRCxDQUFDO0FBRkQsOEJBRUM7QUFDRDtJQUNFLE1BQU0sQ0FBQyxjQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7QUFDL0MsQ0FBQztBQUZELG9DQUVDO0FBQ0Q7SUFDRSxNQUFNLENBQUMsY0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO0FBQ3RELENBQUM7QUFGRCxrREFFQztBQUNEO0lBQ0UsTUFBTSxDQUFDLGNBQU8sQ0FBQyxNQUFNLENBQUMsZUFBZSxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRkQsc0RBRUM7QUFDRDtJQUNFLE1BQU0sQ0FBQyxVQUFDLE1BQW1CLElBQUssT0FBQSxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQWIsQ0FBYSxDQUFDLEVBQWpDLENBQWlDLENBQUM7QUFDcEUsQ0FBQztBQUZELDRDQUVDO0FBQ0Q7SUFDRSxNQUFNLENBQUMsVUFBQyxNQUFtQixJQUFLLE9BQUEsTUFBTTtTQUNuQyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUM7U0FDbkIsU0FBUyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLEVBQXJELENBQXFELENBQUMsRUFGMUMsQ0FFMEMsQ0FBQztBQUM3RSxDQUFDO0FBSkQsc0NBSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdG9yZSBhcyBTLCBTdG9yZU1vZHVsZSwgQWN0aW9uIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xyXG5pbXBvcnQgeyBTdG9yZURldnRvb2xzTW9kdWxlIH0gZnJvbSAnQG5ncngvc3RvcmUtZGV2dG9vbHMnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTmF0aXZlU2NyaXB0RGV2VG9vbHNNb25pdG9ycyB9IGZyb20gXCJuZ3J4LWRldnRvb2xzLW5hdGl2ZXNjcmlwdFwiO1xyXG5cclxuaW1wb3J0IHsgY29tYmluZVJlZHVjZXJzIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xyXG5pbXBvcnQgeyBjb21wb3NlIH0gZnJvbSAnQG5ncngvY29yZSc7XHJcbmltcG9ydCAqIGFzIEN5Y2xlcyBmcm9tICcuL2N5Y2xlcyc7XHJcbmltcG9ydCB7IGVudmlyb25tZW50IH0gZnJvbSAnLi4vZW52aXJvbm1lbnRzL2Vudmlyb25tZW50JztcclxuXHJcbmV4cG9ydCBjb25zdCByZWR1Y2VycyA9IHtcclxuICB0ZXN0OiAoKSA9PiB7XHJcbiAgICByZXR1cm4geyBhOiAnaGV5JytNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMCkgfVxyXG4gIH0sXHJcbiAgY3ljbGVzOiBDeWNsZXMuY3ljbGVzLFxyXG59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcHBTdGF0ZSB7XHJcbiAgdGVzdDogT2JqZWN0O1xyXG4gIGN5Y2xlczogQ3ljbGVzLkN5Y2xlc1N0YXRlO1xyXG59O1xyXG5cclxuY29uc3QgcHJvZCA9IGNvbWJpbmVSZWR1Y2VycyhyZWR1Y2Vycyk7XHJcbmNvbnN0IGRldiA9IGNvbXBvc2UoY29tYmluZVJlZHVjZXJzKShyZWR1Y2Vycyk7XHJcbmV4cG9ydCBmdW5jdGlvbiByZWR1eChzdGF0ZTogYW55LCBhY3Rpb246IGFueSkge1xyXG4gIHJldHVybiBlbnZpcm9ubWVudC5wcm9kdWN0aW9uID8gcHJvZChzdGF0ZSwgYWN0aW9uKSA6IGRldihzdGF0ZSwgYWN0aW9uKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFNUT1JFID0gW1xyXG4gIE5hdGl2ZVNjcmlwdERldlRvb2xzTW9uaXRvcnMsXHJcbiAgU3RvcmVNb2R1bGUucHJvdmlkZVN0b3JlKHJlZHV4KSxcclxuICBTdG9yZURldnRvb2xzTW9kdWxlLmluc3RydW1lbnRTdG9yZSgpLFxyXG4gIC8vIFN0b3JlRGV2dG9vbHNNb2R1bGUuaW5zdHJ1bWVudFN0b3JlKClcclxuXTtcclxuXHJcbi8vIFNlbGVjdG9yc1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3ljbGVzKCkge1xyXG4gIHJldHVybiAoc3RhdGUkOiBTPEFwcFN0YXRlPikgPT4gc3RhdGUkLnNlbGVjdChzID0+IHMuY3ljbGVzKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3ljbGVzSWRzKCkge1xyXG4gIHJldHVybiBjb21wb3NlKEN5Y2xlcy5nZXRJZHMoKSwgZ2V0Q3ljbGVzKCkpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDeWNsZXNTZWxlY3RlZElkKCkge1xyXG4gIHJldHVybiBjb21wb3NlKEN5Y2xlcy5nZXRTZWxlY3RlZElkKCksIGdldEN5Y2xlcygpKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3ljbGVzU2VsZWN0ZWREYXRlKCkge1xyXG4gIHJldHVybiBjb21wb3NlKEN5Y2xlcy5nZXRTZWxlY3RlZERhdGUoKSwgZ2V0Q3ljbGVzKCkpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDeWNsZXNEYXRhUmF3KCkge1xyXG4gIHJldHVybiAoc3RhdGUkOiBTPEFwcFN0YXRlPikgPT4gc3RhdGUkLnNlbGVjdChzID0+IHMuY3ljbGVzLmRhdGEpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDeWNsZXNEYXRhKCkge1xyXG4gIHJldHVybiAoc3RhdGUkOiBTPEFwcFN0YXRlPikgPT4gc3RhdGUkXHJcbiAgICAubGV0KGdldEN5Y2xlc0lkcygpKVxyXG4gICAgLnN3aXRjaE1hcChpZHMgPT4gc3RhdGUkLmxldChjb21wb3NlKEN5Y2xlcy5nZXREYXRhKGlkcyksIGdldEN5Y2xlcygpKSkpO1xyXG59XHJcbiJdfQ==